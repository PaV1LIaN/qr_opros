<?php elseif ($type === 'FILE'): ?>
  <?php
    $diskFileId = (int)($settings['diskFileId'] ?? $settings['fileId'] ?? 0);
    $label = (string)($settings['label'] ?? 'Открыть файл');
  ?>

  <?php if ($diskFileId <= 0): ?>
    <div class="ts-site-empty">Файл не задан.</div>

  <?php elseif (!\Bitrix\Main\Loader::includeModule('disk')): ?>
    <div class="ts-site-empty">Модуль disk не установлен.</div>

  <?php else: ?>
    <?php
      $file = \Bitrix\Disk\File::loadById($diskFileId);
      if (!$file) {
          $fileUrl = '';
      } else {
          $fileUrl = \Bitrix\Disk\Driver::getInstance()
              ->getUrlManager()
              ->getUrlForShowFile($file);
      }
    ?>

    <?php if ($fileUrl !== ''): ?>
      <div style="display:flex; align-items:center; gap:10px; flex-wrap:wrap;">
        <a class="ts-site-link-btn" href="<?= htmlspecialcharsbx($fileUrl) ?>" target="_blank">
          <?= htmlspecialcharsbx($label) ?>
        </a>
        <span style="font-size:12px;color:var(--muted);">
          <?= htmlspecialcharsbx($file ? $file->getName() : 'file') ?>
        </span>
      </div>
    <?php else: ?>
      <div class="ts-site-empty">Файл не найден в Диске (ID: <?= (int)$diskFileId ?>).</div>
    <?php endif; ?>
  <?php endif; ?>
