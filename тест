public function assertPageSlugUnique(int $siteId, string $slug, int $excludePageId = 0): void
{
    $pagesClass = $this->pagesClass;

    $filter = [
        '=UF_SITE' => $siteId,
        '=UF_SLUG' => $slug,
    ];

    if ($excludePageId > 0) {
        $filter['!ID'] = $excludePageId; // исключаем текущую страницу при обновлении
    }

    $row = $pagesClass::getList([
        'filter' => $filter,
        'select' => ['ID'],
        'limit' => 1,
    ])->fetch();

    if ($row) {
        throw new \InvalidArgumentException('SLUG уже используется на этом сайте. Выбери другой.');
    }
}
