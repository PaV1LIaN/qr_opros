<?php

namespace Cc10\TypicalSites\Components;

use CBitrixComponent;

require_once $_SERVER['DOCUMENT_ROOT'] . '/local/typical_sites/lib/SiteService.php';

class SitesListComponent extends CBitrixComponent
{
    public function executeComponent()
    {
        global $USER;

        if (!$USER->IsAuthorized()) {
            ShowError("Требуется авторизация.");
            return;
        }

        $service = new \Cc10\SiteService();
        $this->arResult['SITES'] = $service->getSitesForUser((int)$USER->GetID());

        $this->includeComponentTemplate();
    }
}
